<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8. Create farmers &mdash; GEB 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="9. Pick farmer crops" href="9_pick_farmer_crops.html" />
    <link rel="prev" title="7. Get irrigation sources" href="7_get_irrigation_source.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> GEB
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="preprocessing.html">Preprocessing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_create_mask_and_hydro_maps.html">1. Create mask and hydro maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_scale_cwatm.html">2. Scale CWatM input data</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_scrape_command_areas.html">3. Scrape command areas</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_create_lakes_and_reservoirs.html">4. Create land and reservoir map</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_create_land_use_map.html">5. Create land use map</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_get_farm_sizes.html">6. Create farm size map</a></li>
<li class="toctree-l2"><a class="reference internal" href="7_get_irrigation_source.html">7. Get irrigation sources</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">8. Create farmers</a></li>
<li class="toctree-l2"><a class="reference internal" href="9_pick_farmer_crops.html">9. Pick farmer crops</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_preprocess_modflow.html">10. Preprocess MODFLOW data</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_other_data.html">11. Other data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running.html">Running the model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HRUs.html">Farm-level HRUs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Agents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../agents/__init__.html">Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agents/farmers.html">Farmers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agents/ngo.html">NGO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agents/government.html">Government</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../model.html">Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cwatm_model.html">CWatM Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../report.html">Report</a></li>
<li class="toctree-l1"><a class="reference internal" href="../artists.html">Artists</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../authors_page.html">Authors</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GEB</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="preprocessing.html">Preprocessing</a> &raquo;</li>
      <li><span class="section-number">8. </span>Create farmers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/preprocessing/8_create_farmers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="create-farmers">
<h1><span class="section-number">8. </span>Create farmers<a class="headerlink" href="#create-farmers" title="Permalink to this heading"></a></h1>
<p>This file is used to create the farmer agents. If you have a map of all individual farms, you should use that. If not, then you can use <a class="reference internal" href="#"><span class="doc">Create farmers</span></a> to create a statistically representative dataset of farmers. The first input <cite>FARM_SIZE_CHOICES_M2</cite> an array of the various farm sizes that exist in m<sup>2</sup>. Here a lower and upper bound are given for each choice of farm size.</p>
<p>The second input <cite>FARM_SIZE_PROBABILITIES</cite> is a map at the resolution and bounds of the submask, here placed in <cite>ROOT/input/agents/farm_size/2010-11/farmsize.tif</cite>, and as layers the probability that each of the previously defined farm sizes occurs in a given cell. Naturally, the probabilities for a given cell should add up to 1.</p>
<p>The function <code class="xref py py-func docutils literal notranslate"><span class="pre">8_create_farmers.create_farmers()</span></code> is then used to create the farmers on the cultivated land as exported in <a class="reference internal" href="5_create_land_use_map.html"><span class="doc">Create land use map</span></a>. The function <code class="xref py py-func docutils literal notranslate"><span class="pre">8_create_farmers.create_farms()</span></code> which is used to create the actual farms, starts at the top-left going down row by row. When the scripts loops through the cells and hits a cell that should be cultivated, the script first checks what size the farm should be (using the specified farm size probabilities) and randomly choosing a farm size between the given bounds. Then the farm is randomly expanded to all sides, filling other cultivated cells until the given farm size is reached. The loop then continues until all cultivated land is filled by farms. Moreover, the center points (lon, lat) of all farms are collected in <cite>farmer_locs</cite>.</p>
<span class="target" id="module-preprocessing.8_create_farmers"></span><dl class="py function">
<dt class="sig sig-object py" id="preprocessing.8_create_farmers.create_farmers">
<span class="sig-name descname"><span class="pre">create_farmers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">farm_size_probabilities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">farm_size_choices_m2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/preprocessing/8_create_farmers.html#create_farmers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#preprocessing.8_create_farmers.create_farmers" title="Permalink to this definition"></a></dt>
<dd><p>Takes as input an map of farm sizes of relative distribution of given farm sizes. The first band is the probability that a farm size is of size as given by the farm_size_choices_m2 argumement. The function then writes a raster of farms, where each unique ID is a field owned by a different farmer. Farms only exist on cultivated land. In addition a numpy array of the farmer locations (center of the field) is outputted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>farm_size_probabilities</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – map of indices of farm size</p></li>
<li><p><strong>farm_size_choices_m2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – size of</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="preprocessing.8_create_farmers.create_farms">
<span class="sig-name descname"><span class="pre">create_farms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cultivated_land</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">farm_size_probabilities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">farm_size_choices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cell_area</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/preprocessing/8_create_farmers.html#create_farms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#preprocessing.8_create_farmers.create_farms" title="Permalink to this definition"></a></dt>
<dd><p>Creates random farms considering the farm size distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cultivated_land</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – map of cultivated land.</p></li>
<li><p><strong>gt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – geotransformation of cultivated land map.</p></li>
<li><p><strong>farm_size_probabilities</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – map of the probabilities for the various farm sizes to exist in a specific cell.</p></li>
<li><p><strong>farm_size_choices</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – Lower and upper bound of the farm size correlating to the farm size probabilities. First dimension must be equal to number of layers of farm_size_probabilities. Size of the second dimension is 2, to represent the lower and upper bound.</p></li>
<li><p><strong>cell_area</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>) – map of cell areas for all cells.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>farms</strong> – map of farms. Each unique ID is land owned by a single farmer. Non-cultivated land is represented by -1.</p></li>
<li><p><strong>farmer_locs</strong> – 2 dimensional numpy array of farmer locations. First dimension corresponds to the IDs of <cite>farms</cite>, and the second dimension are longitude and latitude.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="preprocessing.8_create_farmers.random">
<span class="sig-name descname"><span class="pre">random</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">interval</span> <span class="pre">[0,</span> <span class="pre">1).</span></span></span><a class="headerlink" href="#preprocessing.8_create_farmers.random" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="7_get_irrigation_source.html" class="btn btn-neutral float-left" title="7. Get irrigation sources" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="9_pick_farmer_crops.html" class="btn btn-neutral float-right" title="9. Pick farmer crops" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../copyright.html">Copyright</a> 2022, IIASA and VU-IVM.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>